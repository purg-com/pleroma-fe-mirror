Partially migrated from vuex to pinia
